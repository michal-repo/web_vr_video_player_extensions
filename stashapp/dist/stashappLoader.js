(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>s});class s{data;verifyVideoSRC;constructor(e,t=!1){if("string"!=typeof e)return err="Error: `json_file` must be valid string",console.error(err),err;this.verifyVideoSRC=t,fetch(e+("/"==e.substring(e.length-1)?"":"/")+"graphql",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{ allScenes {id title file_mod_time files {width height} paths { screenshot stream } studio { id name } tags { id name } } }"})}).then((e=>e.json())).then((e=>this.processStashAppData(e))).then((e=>(window.registerExtension({type:"stashapp",name:"Stash App",verifyVideoSRC:!1,data:e}),!0))).catch((e=>(console.error("Error:",e),e)))}processStashAppData(e){let t={videos:[]},s=[];return e.data.allScenes.forEach((e=>{let r="screen";e.tags.forEach((e=>{switch(e.name){case"SBS":r="sbs";break;case"TB":r="tb";break;case"SCREEN":r="screen"}}));let o=Date.parse(e.file_mod_time);null===e.studio&&(e.studio={name:"MAIN"}),t.videos[s[e.studio.name]-1]||(s.push(e.studio.name),s[e.studio.name]=t.videos.push(new i(e.studio.name))),t.videos[s[e.studio.name]-1].list.push(new a(""!=e.title?e.title:e.id,e.paths.stream,e.paths.screenshot,r,e.files[0].height,e.files[0].width,e.file_mod_time,o))})),t}}class i{name;list;constructor(e){this.name=e,this.list=[]}}class a{name;src;thumbnail;screen_type;frame_height;frame_width;date;epoch;constructor(e,t,s,i,a,r,o,h){this.name=e,this.src=t,this.thumbnail=s,this.screen_type=i,this.frame_height=a,this.frame_width=r,this.date=o,this.epoch=h}}self.StashAppLoader=t.default})();